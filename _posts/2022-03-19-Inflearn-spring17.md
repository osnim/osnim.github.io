---
title: 스프링 입문 17 - 7.스프링 DB 접근 기술 (1)
author:
  name: osnim
  link: https://github.com/osnim
date: 2022-03-19 19:30:00 +0900
categories: [Back-end]
tags: [Inflearn, Spring]
---

이전 시간은 임시 데이터를 메모리에 저장을 했다면 지금부터는 간단한 H2라는 데이터베이스를 설치하여 이곳에 데이터를 저장하고 꺼내오는 방식을 스프링에 적용시켜보도록 할 것입니다.

## H2 데이터베이스 설치

- H2 데이터베이스 : 개발이나 테스트 용도로 가볍고 편리한 DB, 웹 화면 제공합니다.

(https://www.h2database.com/html/download-archive.html)에서 **1.4.200** 버전을 설치합니다. 저는 windows10 이므로 따른 설정은 하지 않았습니다.<br>

![image](https://user-images.githubusercontent.com/79408217/159117956-4e5bca9a-268d-42fa-b78c-9a20d1fcde30.png)

실행파일을 바로 실행하면 **H2 Console** 이라는 실행파일이 깔리는데 이 파일을 실행하면 **H2 데이터베이스** 설정창이 브라우저에 띄어집니다.<br>
주소는 자동 설정된 아이피를 **localhost** 로 바꿔줍니다. <br>
데이터베이스 파일을 생성할 때, **JDBC URL**을 최초에는 **jdbc:h2:~/test** 로 설정하고, 연결을 클릭합니다.

![image](https://user-images.githubusercontent.com/79408217/159118146-38d2cf75-c6bd-4cf4-bea9-305f1ce718fa.png)

그 후, **jdbc:h2:tcp://localhost/~/test** 로 변경합니다. 이렇게 변경해야 여러 곳에서 H2데이터베이스 접근이 가능합니다.<br>

뒤로가기는 H2 왼쪽 상단 **연결끊기** 버튼을 누르면 가능합니다.

## 1.테이블 생성하기

```SQL
create table member
(
id bigint generated by default as identity,
name varchar(255),
primary key (id)
);
```

![image](https://user-images.githubusercontent.com/79408217/159118313-7ac1508b-63a5-48a1-8f19-9a2cbd5f4efc.png)

위와 같이 코드를 작성하고 실행을 하여 **member**라는 이름의 테이블을 생성합니다.

- **bigint** : java에서 Long 이지만 SQL에서는 **bigint** 형을 선언합니다.
- **generated by default as identity** : DB에 null 값이 들어오면 알아서 id 값을 자동으로 채워주는 기능을 수행합니다.

![image](https://user-images.githubusercontent.com/79408217/159118502-392ef0dc-e275-4419-8e69-912cc2b48b4f.png)

위와 같이 **spring** 이라는 이름을 가진 데이터를 **member** 데이터베이스에 삽입하였습니다.

![image](https://user-images.githubusercontent.com/79408217/159118521-fd021daf-55ab-4e6f-ad39-eea0803159b6.png)

spring이라는 이름을 가진 data가 들어간 것을 확인할 수 있습니다. ID는 자동으로 1이 들어가는 것도 확인할 수 있습니다.

![image](https://user-images.githubusercontent.com/79408217/159118578-923304c0-70eb-408b-8ba2-100c93da3d46.png)

![image](https://user-images.githubusercontent.com/79408217/159119291-cd5fc7bf-78a2-42f5-8f18-cdf995256db3.png)

**spring2** 라는 이름을 가진 데이터도 추가로 반영한 결과입니다.

## 추가

![image](https://user-images.githubusercontent.com/79408217/159119056-f57db0ee-dd0c-43f4-abe8-de3b6e53b061.png)

src 디렉토리 밖에 sql 디렉토리를 만들고 ddl.sql 파일을 만들서 **table**을 함께 관리할 수 있게 했습니다.

## Tip

- 변수를 클릭하고 **Shift + F6** 누르면 단락에 있는 이름이 같은 변수들을 한번에 바꿀 수 있습니다.
- **Alt +Enter** 를 누르면 바로 Local 가져올 수 있습니다.
- 인텔리제이 주석
  줄 단위 : ctrl + /
  블록단위 : ctrl + shift + /
- getter, setter 단축키 : Alt + Insert

이 글은 *김영한님*의 _스프링 입문 - 코드로 배우는 스프링 부트, 웹 MVC, DB 접근 기술_ 강의를 들으며 공부한 것을 직접 정리한 내용입니다.

출처: <https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9E%85%EB%AC%B8-%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8#curriculum>
